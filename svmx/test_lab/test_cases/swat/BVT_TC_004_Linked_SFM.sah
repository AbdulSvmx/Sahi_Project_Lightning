
//Author - Shashikala Kamath

var $BVT_TC_004_Linked_SFM = _testcase("BVT_TC_004_Linked_SFM",
		"Configure the SFW to include standard and custom Linked SFM and launch the same in delivery." +
		"Add child lines is main process and linked process and save.");

$BVT_TC_004_Linked_SFM.start();
_setSpeed($g_stepSpeed);

//Pre - Condition 
$bo_act_login.login("https://test.salesforce.com", "lohithaadmin@swatpart2.com", "maxpl0re2");

var $wizardSelectObjectName = "Work Order";
var $wizardTitleName = $bo_act_common.generateRandomName("SFWTitle");
var $wizardIDName = $bo_act_common.generateRandomName("SFWId");
var $wizardStepType = "SFM";
var $wizardStepName = "Add/Edit Products Serviced";
var $executionMode = "Interactive";
var $handOver = false;


var $caseNumber = $bo_act_Cases.createCase("New", "High", "Email");
var $accountName = $bo_act_accounts.createAccount();
var $contactName = $bo_act_contacts.createContact($accountName);
var $productName =$bo_act_products.createProduct();
var $IBName = $bo_act_installedProduct.createInstalledProduct($productName,$accountName,$contactName);


$bo_act_navigation.navigateToSfmWizard();
$bo_act_SFW.createWizardGeneralInfo($wizardSelectObjectName, $wizardTitleName, $wizardIDName);
$bo_act_SFW.createSFMWizardStepwithHandOver($wizardStepType, $wizardStepName, $executionMode, $handOver);
$bo_act_SFW.quickSaveSFWizard();
$bo_act_SFW.saveAndClose();

//Create a Work Order record
$workOrderNo = $swat_act_workOrders.createWorkOrder($caseNumber, $accountName, $contactName, $IBName, "Open", "High", "Field Service");


$workOrderNo = "WO-00000138";
//_click($workOrderNo);
_selectDomain("/svmx/"); 
var $wizardTitleName = "SFM Wiz53201814355";
_isVisible(_cell({title: $wizardTitleName}));
_assertVisible(_cell({title:$wizardTitleName}),"Pass");
_click(_button("Add/Edit Products Serviced"));
_selectDomain();

_wait(10000,_isVisible(_label("Site:")));

// Add a Product Serviced Line
// The following function adds a part and launches the Linked Process


$sfm_act_createCustomWizard.addProductServiced("Ciaz");

//Add lines in the linked process and save the linked process followe by the main process
_wait(6000);
$sfm_act_createCustomWizard.addParts("Ciaz");
$sfm_act_createCustomWizard.addLabor("Ciaz");
$sfm_act_createCustomWizard.addExpenses("Airfare");
$sfm_act_createCustomWizard.addTravel();
$sfm_act_createCustomWizard.saveWizard();
_wait(10000);
$sfm_act_createCustomWizard.saveWizard();
_wait(10000);


$BVT_TC_004_Linked_SFM.end();



