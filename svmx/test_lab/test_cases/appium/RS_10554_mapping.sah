var RS_10554_mapping = _testcase("RS_10554_mapping","Verify field map for new header record & existing child record");
RS_10554_mapping.start();

//_writeFile("false", $appiumPath+$sahiIntermediatoryPath, true);

var $sfmNameToBeCloned = "Create Work Order from Installed Product";
var $sfmName = $bo_act_common.generateRandomName("RS_10554_");
var $isCustom = true;
var $objName="Work Order"
var $sorceobj="Installed Product"
var $sfmTemplate = "--None--";
var $sfmTemplateSaveAsName = $bo_act_common.generateRandomName("RS_10554_Temp");
var $headersToAdd = ["Account","Product","Scheduled Date Time","Scheduled Date","Order Type","Component"];
var $childObj="Parts";
var $fieldName=["Part","Date Required"];

var $containerName="Work Order";
$sourceObj= "Installed Product";
$targetObj = "Work Order";
//$mappingField = ["Component","Order Type","Product","Scheduled Date","Scheduled Date Time"];
//$mappingValue = ["Record ID","Field Service","Product","Date Installed","Last Modified Date"];

var $mapName="RS_10554_map_header_Auto1";
var $mapName_chid="RS_10554_map_child_Auto1";

var $wizardObject="Installed Product";
var $wizardName="Automation IB Wizard";
var $wizardType="sfm";
var $profile="auto group profile";
var $handOver="false";
var $wizardCriteria=null;
	$bo_act_login.login($g_url, $appiumAdminUn, $appiumAdminPwd);
$sfm_act_lightningConfig.switchToLightning();

$mappingField = ["Account","Order Type","Component","Product","Scheduled Date","Scheduled Date Time"];
$mappingValue = ["Account","Field Service","Record ID","Product","Date Installed","Last Modified Date"];

$mappingField_child = ["Date Required","Part"];
$mappingValue_child = ["Date Installed","Product"];
var $containerName="Work Order";
var $containerName_child="Parts"
var $textLabels=[];
var $textValues=[];
$bo_act_navigation.navigateToSfmTransactionDesigner();
_wait(10000);
_click(_f("main").s_button("New SFM Transaction"));
_setValue($bo_pg_sfmTransactionAndDesigner.txt_name, $sfmName);

_setValue($bo_pg_sfmTransactionAndDesigner.txt_sfmTransactionId, $sfmName);

$bo_act_SFM.toCreateTheserecordDetails($sorceobj,$objName);
_wait(3000);

_click($bo_pg_sfmTransactionAndDesigner.btn_screenDesigner);
_wait(5000);
_setSelected($bo_pg_sfmTransactionAndDesigner.sel_sfmTemplate,$sfmTemplate);
_setValue($bo_pg_sfmTransactionAndDesigner.txt_sfmSavePageLayoutAs,$sfmTemplateSaveAsName);
_setValue($bo_pg_sfmTransactionAndDesigner.txt_sfmSavePageLayoutAsId,$sfmTemplateSaveAsName);
_wait(5000);


$sfm_act_Transactions.addHeader($headersToAdd);
$sfm_act_Transactions.addChildFields($childObj,$fieldName);
 _click(_f("main").s_button("Save[3]"));
_wait(5000);

_click(_f("main").tab("Qualifying Criteria and Field Mappings"));
//_click($bo_pg_sfmTransactionAndDesigner.btn_qualifyingCriteriaAndFieldMapping);
$bo_act_mappings.createMapping($containerName,$mappingField,$mappingValue,$textLabels,$textValues,$mapName);
//_click(_f("main").tab("Qualifying Criteria and Field Mappings"));
_wait(5000);

_selectDomain($domainName);
$bo_act_mappings.createMapping($containerName_child,$mappingField_child,$mappingValue_child,$textLabels,$textValues,$mapName_chid);
_wait(5000);

$sfm_act_wizards.addToWizard($wizardObject,$wizardName, $wizardType,$sfmName,$handOver,$profile,$wizardCriteria);  

//_click(_f("main").s_button("Save & Close"));
//_writeFile("true", $appiumPath+$sahiIntermediatoryPath, true);


RS_10554_mapping.end();


