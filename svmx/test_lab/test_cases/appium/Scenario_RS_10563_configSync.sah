var $scenario_10563 = _testcase("scenario_10563","Verify changes in SFM processes, Opdoc processes, SFM searches after config sync");
$scenario_10563.start();

var $sfmName = "Auto_Reg_10563";
var $sfmName1 = "Auto_OPDOC_10563";
var $templateName = $bo_act_common.generateRandomName("Auto_Template_10563");
var $templateName1 = $bo_act_common.generateRandomName("Auto_Template_10563");
var $template = _readFile("/auto/sahi_pro/userdata/scripts/Sahi_Project_Lightning/scenario7.txt");
var $tgtObj =  "Work Detail (Work Order)";
var $tgtObj1 =  "Checklist (Work Order)";
var $sfmTemplate = "SVMXSTD: Work Order and Estimates";
var $sfmTemplateSaveAsName = $bo_act_common.generateRandomName("SFM_Temp_Name_");
var $searchObjects = ["Work Order"];
var $searchName = "WO SEARCH";
var $procType = "as Standalone for the purpose of creating a new record";
var $procType1 = "to generate an Output Document for a header record with/without its child records";
var $profile="auto group profile";

//*****Login*****
$bo_act_login.login($g_url, $appiumAdminUn, $appiumAdminPwd);
$sfm_act_lightningConfig.switchToLightning();
_wait(5000);
//*****Add Standalone for creating a new record*****
$bo_act_navigation.navigateToSfmTransactionDesigner();
_setStrictVisibilityCheck(true);
_click($bo_pg_sfmTransactionAndDesigner.btn_yourCustomSfmTransactions);
_setValue($bo_pg_sfmTransactionAndDesigner.txt_yourCustomSfmTransactionsQuickFind,$sfmName);
_set($var,_isVisible(_f("main").s_label($sfmName)));
if($var){
	_log("Process already present");
	_click(_f("main").s_label($sfmName));
	_click($sfm_pg_screenDesigner.tab_screenDesigner);
	if(_isVisible(_f("main").uiftetextfield("Country"))){
		_click(_f("main").s_button("/Remove this field/").rightOf(_f("main").fieldrenderer("City")));
	}
	if(_isVisible(_f("main").uiftetextfield("City"))){
		_click(_f("main").s_button("/Remove this field/").under(_f("main").fieldrenderer("Product")));
	}
	_click(_f("main").s_button("Save[3]"));
	_click($bo_pg_formDesigner.btn_quickSave);
}
else{
	$sfm_act_Transactions.addNewProcess($sfmName, $procType,$tgtObj);
	$sfm_act_Transactions.addNewScreenDesigner($sfmTemplate, $sfmTemplateSaveAsName);
}
//*****Add AUTOMATION SEARCH*****
$bo_act_navigation.navigateToSfmSearchDesigner();
$sfm_act_search.newCustomSearch($searchName, $searchObjects);
//*****Add OPDOC for a header Record*****
$bo_act_navigation.navigateToSfmTransactionDesigner();
_setStrictVisibilityCheck(true);
_click($bo_pg_sfmTransactionAndDesigner.btn_yourCustomSfmTransactions);
_setValue($bo_pg_sfmTransactionAndDesigner.txt_yourCustomSfmTransactionsQuickFind,$sfmName1);
_set($var,_isVisible(_f("main").s_label($sfmName1)));
if($var){
	_log("Process already present");
}
else{
	$sfm_act_Transactions.addNewProcess($sfmName1, $procType1,$tgtObj1);
	$sfm_act_Transactions.addNewTemplateDesigner($templateName1, $template);
}
$bo_act_navigation.navigateToSfmWizard();
_selectDomain("/svmx/");
_setSelected($sfm_pg_wizards.selectObject,"Work Order");
_wait(6000);
$bo_act_navigation.editWizard("AutoRegression");
$sfm_act_createCustomWizard.addWizStepWithoutName("SFM", $sfmName, $profile);
$sfm_act_createCustomWizard.addWizStepWithoutName("Output Document", $sfmName1, $profile);
$scenario_10563.end();