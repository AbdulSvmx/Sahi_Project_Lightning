//author - Nagendra Prasad

var $RS_7019 = _testcase("$RS_7019","Verify the Stock Transfer of serialised and non seriliased products");
$RS_7019.start();
_setSpeed(100);

//PreCondition 
$bo_act_login.login($g_url, $bac_un, $bac_pwd);
// Creating product with serialized stockable is active
var $proName1 = $bo_act_products.createProduct("pro12", "--None--");
//Creating product with non -serialized stockable is active
var $proName2 = $bo_act_products.createProductWithoutSerialized("pro13", "--None--");
var $recordType = ["Depot","Depot Child","Depot Parent","Standard Location"];
var $accountName = $bo_act_accounts.createAccount();
var $street = "MG Road";
var $country = "India";
var $zipCode = 560001;
//creating locations 
var $Location1 = $bo_act_locations.createLocation($recordType[0], $accountName, $street, $country, $zipCode);
//editing the location
$bo_act_locations.editLocation($Location1);
var $Location2 = $bo_act_locations.createLocation($recordType[0], $accountName, $street, $country, $zipCode);
$bo_act_locations.editLocation($Location2);
// Create stock adjustments
var $StockAdjustment1 = $bo_act_stockAdjustment.createStockAdjustment($Location1,$proName1 ,"10", "Excess");
var $StockAdjustment2 = $bo_act_stockAdjustment.createStockAdjustment($Location2,$proName2 ,"10", "Excess");
var $stockTransfer1 = $bo_act_stockTransfer.createStockTransfer($Location1, $Location2);
var $Editlines = $bo_act_stockTransfer.Editlines($proName1, "3",$stockTransfer1);
var $Editlines = $bo_act_stockTransfer.Editlines($proName2, "5");
var $posttoInventory = $bo_act_stockTransfer.postToInventorySerialised($stockTransfer1, "3");
//Navigate to Loc and click loc name
_click(_link("/STK-/",_near(_tableHeader("Name"),_under(_heading3("Product Stock")))));
_click(_link("/SHIST-/",_near(_tableHeader("Name"),_under(_heading3("Stock History (Product Stock)")))));
_assertEqual("3.0000",_getText(_div(0,_rightOf(_span("/Transaction Qty/")))),"Qty Transferred is not matching");
_assertEqual("5.0000",_getText(_div(0,_rightOf(_span("/Qty before change/")))),"Qty before change is not matching");
_assertEqual("8.0000",_getText(_div(0,_rightOf(_span("/Qty after change/")))),"Qty after change is not matching");
