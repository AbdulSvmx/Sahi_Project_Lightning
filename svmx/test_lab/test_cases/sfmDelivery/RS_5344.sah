var $rs_5344 = _testcase("RS_5344","");
$rs_5344.start();
$sfmNameToBeCloned = "Manage Work Order Lines - Usage";
$sfmName = $bo_act_common.generateRandomName("RS_5354_");
$isCustom = false;
var $sfmTemplate = "SVMXSTD: Manage WO Usage Lines";
var $sfmTemplateSaveAsName = $sfmName;
var $containerName = ["Order Status","Order Status"];
var $rulename = $sfmName;//"5354Rule1";
var $targetObject ="Work Order";
var $ruleDescription = "Are you sure? Component is null and Entitle not performed";
var $fieldArray = ["Component","Is Entitlement Performed"];
var $conditionArray = ["Is Null","Equals"];
var $operandArray =["", "Function"];
var $valueArray =["", "false"];
var $advExpr= "1 AND 2";
var $fieldName =["Component","Is Entitlement Performed"];
//var $fieldName1="Is Entitlement Performed";
var $wizardName = "SFM Delivery Auto";
var $wizardType = "SFM";
var $domainName = "/visual.force.com/";
var $wizardObject = "Work Order";
var $messageType = "Confirmation";

_setSpeed(100);
$bo_act_login.login($g_url, $sfmUsn, $sfmPwd);

$sfm_act_SFM.cloneTDM016($sfmNameToBeCloned, $sfmName, $isCustom,$sfmTemplateSaveAsName, $sfmTemplate,  $fieldName, $containerName);
$sfm_pg_dvr.newRule($targetObject, $rulename, $ruleDescription, $fieldArray, $conditionArray, $operandArray, $valueArray, $advExpr, $messageType);
_click($sfm_pg_sfmDesigner.btn_quickSaveSFM);
_click($sfm_pg_sfmDesigner.btn_saveSFM); 
_wait(30000,_isVisible($sfm_pg_sfmDesigner.lnk_home));

$sfm_act_wizards.addToWizard($wizardObject, $wizardName, $wizardType, $sfmName);
_wait(30000,_isVisible($sfm_pg_sfmDesigner.lnk_home)); 
_click($sfm_pg_sfmDesigner.lnk_home);

//Create WO dynamically and search that work order in global search and validate in delivery.
$login = $sfm_act_createWorkOrder.login($sfmUsn, $sfmPwd);
_log($login);
var $woName;
$woName = $sfm_act_createWorkOrder.create_WO();


//Open the WO and click on the above created SFM 

_click($sfm_pg_sfmDesigner.lnk_workOrder);
_wait(3000);
$sfm_act_common.globalSearch($woName);
_click(_link($woName));
_selectDomain($domainName);
_click(_button($sfmName));

//Validate DVR
_selectDomain();
_wait(20000);
_setValue(_textbox("svmx-text-1037-inputEl",_rightOf(_label("Component:"))), "");
_click($sfm_pg_sfmDesigner.btn_deliveryQuickSave);
if(_exists(_span("SFM Transaction Manager"))){
	if(_exists(_label($ruleDescription))){
	_log("Pass ::: ");
	}else{
		_log("Fail");
	}
}


//_click(_button("Is Entitlement Performed:",_rightOf(_label("Is Entitlement Performed:"))));

$rs_5344.end();