var $rs_10444 = _testcase("RS-10444","Verify form fill functionality on header");
$rs_10444.start();

var $sfmNameToBeCloned = "Manage Work Order Lines - Usage";
var $sfmName = $bo_act_common.generateRandomName("RS_10444_");
var $isCustom = false;
var $sfmTemplate = "SVMXSTD: Manage WO Usage Lines";
var $sfmTemplateSaveAsName = $sfmName;
var $containerName = ["Order Status","Order Status","Order Status"];
var $fieldName = ["Case","Priority","Problem Description"];
var $objMapping = "SVMXSTD: Case To Work Order";
var $wizardObject ="Work Order";

//variables for rest call
//$orgInstance = "cs19";
$objName= "Case";
$obJson = "{\"SVMXC__Billing_Type__c\":\"Loan\",\"Priority\":\"High\",\"Description\":\"CaseCreatedfromRest\"}";
$columnName = "CaseNumber";
$filter="id";
//create a case
$filterValue=$sfm_act_restApiMethods.postRestApi($sfmlUsn,$sfmlPwd,$sfmClientId,$sfmConsumerSecret,$sfmOrgInstance,$objName,$obJson,"POST");
//get the caseNumber
$caseNumber =$sfm_act_restApiMethods.getRestApi($sfmlUsn,$sfmlPwd,$sfmClientId,$sfmConsumerSecret,$sfmOrgInstance,"GET", $objName, $columnName, $filter, $filterValue);


//login to the org
_setSpeed($g_stepSpeed);
$bo_act_login.login($g_url, $sfmlUsn,$sfmlPwd);
$sfm_act_lightningConfig.switchToLightning(); 

//clone tmd016
$sfm_act_SFM.cloneTDM016($sfmNameToBeCloned,$sfmName,$isCustom, $sfmTemplateSaveAsName, $sfmTemplate, $fieldName, $containerName);
$sfm_act_SFM.setFormFill($fieldName[0], $objMapping);
_click($sfm_pg_sfmDesigner.btn_quickSaveSFM);
_click($sfm_pg_sfmDesigner.btn_saveSFM); 

//add the process to wizard
$sfm_act_wizards.addToWizard($wizardObject, $wizardName[3], $wizardType[1], $sfmName);  
_wait(3000); 

//Create WO through UI for the validatiion
_selectDomain();
$sfm_act_createCustomWizard.createWowithoutvalues();

_click(_span($sfmName));
_selectDomain($domainName);
_wait(8000,_div($sfmName));

//select a case to validate form fill
_click($sfm_pg_wizardWindow.txt_caseLookup);
_setValue($sfm_pg_wizardWindow.txt_quickFindLookUp,$caseNumber);
_click($sfm_pg_wizardWindow.btn_searchProduct);
_click(_link($caseNumber,_in(_div("/sfm-lightninglookupslidingwindow/"))));

//Validate form fill on billing type/problem description/priority fields
$obj= JSON.parse($obJson);
_assertEqual($obj["Priority"], _getText($sfm_pg_sfmDesigner.txt_priority));
_assertEqual($obj["SVMXC__Billing_Type__c"],_getText($sfm_pg_sfmDesigner.txt_billingType));
_assertEqual($obj["Description"],_getText($sfm_pg_sfmDesigner.txt_problemDescription));

$rs_10444.end();
		
		


