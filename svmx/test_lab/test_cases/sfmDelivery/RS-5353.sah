//@author Lakshmisha

/**
* Cloning TDM016/Manage Work Order Lines - Usage process and adding fields to screen
*/

var $url = "https://test.salesforce.com";
var $un = "vansys@pqtpart1.com";
var $pwd = "servicemax2";
var $sfmNameToBeCloned = "Manage Work Order Lines - Usage";
var $sfmName = "RS_5353_TDM016";
var $isCustom = false;
var $sfmTemplate = "SVMXSTD: Manage WO Usage Lines";
var $sfmTemplateSaveAsName = $sfmName;
var $containerName = ["Order Status","Order Status"];
var $rulename ="5353Rule1";
var $targetObject ="Work Order";
var $ruleDescription = "Actual Initial Response Not Equal Function Today, City Starts with Value M";
var $fieldArray = ["City","Actual Initial Response"];
var $conditionArray = ["Equals","Not Equal"];
var $operandArray =["Value", "Function", "Field"];
var $valueArray =["M", "Today"];
var $advExpr= "1 AND 2";
var $fieldName =["City","Actual Initial Response"];
var $fieldName1="Actual Initial Response";
var $wizardObject ="Work Order";
var $wizardName = "SFM Delivery Auto";
var $wizardType = "SFM";

var $domainName = "svmxc.cs21.visual.force.com";
var $messageType="Error";
var $wizardObject ="Work Order";


_setSpeed(100);
$bo_act_login.login($url, $un, $pwd);

$sfm_act_SFM.cloneTDM016($sfmNameToBeCloned, $sfmName, $isCustom, $sfmTemplate, $sfmTemplateSaveAsName, $fieldName, $containerName);
$sfm_pg_dvr.newRule($targetObject, $rulename, $ruleDescription, $fieldArray, $conditionArray, $operandArray, $valueArray, $advExpr, $messageType);
_click(_f("main").s_button("Quick Save"));
_click(_f("main").s_button("Save & Close")); 
_wait(30000,_isVisible(_link("Home")));

$sfm_act_wizards.addToWizard($wizardObject, $wizardName, $wizardType, $sfmName);
_wait(30000,_isVisible(_link("Home")));


$bo_act_login.login($url, $un, $pwd);
$login = $sfm_act_createWorkOrder.login($un,$pwd);
_log($login);
var $woName;
$woName = $sfm_act_createWorkOrder.create_WO();
_log("WO NAME OUTSIDE "+$woName);

/*
//Open the WO and click on the above created SFM 
_setValue(_textbox("str"), ".");
_click(_button("Search"));
_click(_link("WO-00000472"));
_selectDomain($domainName);
_click(_button($sfmName));

//Validate DVR
_selectDomain();
_setValue(_textbox("City:"),"M");

//_click(_div("svmx-trigger-index-0 svmx-form-trigger svmx-form-date-trigger svmx-form-trigger-last svmx-unselectable svmx-form-trigger-over svmx-form-date-trigger-over"));
//_click(_div("svmx-trigger-index-0 svmx-form-trigger svmx-form-date-trigger svmx-form-trigger-last svmx-unselectable svmx-form-trigger-over svmx-form-date-trigger-over"),_rightOf(_textbox("svmx-date-1038-inputEl")));
//_click(_span("22"));



if(_exists(_div("InformationPrice not calculated, because entitlement check has not been performed. OKYesNoCancelOk"))){
	_click(_span("Ok"));
}
else{
	_click(_span("svmx-btn-icon svmx-sfmd-quicksave-icon"));
}

if(_exists(_div($ruleDescription))){
	_log("Pass");
}else{
	_log("Fail");
}
 */

 


