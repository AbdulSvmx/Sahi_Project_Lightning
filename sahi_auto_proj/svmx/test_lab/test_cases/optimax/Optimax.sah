////http://community.sahipro.com/forums/discussion/1811/how-to-include-custom-js-libraries-with-sahi
//https://developer.salesforce.com/forums/?id=906F000000093ubIAA
//http://www.sfdcpoint.com/salesforce/soql-query-in-javascript-example/
//Download the files from here https://test.salesforce.com/soap/ajax/28.0/connection.js

var $un = "govendhan@svmx-cp.org.part1";
var $pwd = "maxpl0re";
var $queryComplex = "Select Id, SVMXC__ProcessID__c, SVMXC__Name__c, SVMXC__Rule_Type__c, SVMXC__Parent_Object_Criteria__c from SVMXC__ServiceMax_Processes__c Where SVMXC__ProcessID__c = 'EXPR038' OR SVMXC__ProcessID__c = 'EXPR037'";
		

_navigateTo("https://test.salesforce.com/");
_setValue(_emailbox("username"), $un);
_setValue(_password("pw"), $pwd);
_click(_submit("Log In to Sandbox"));
//<browser>
	function returnSforce($un,$pwd,$queryComplex){
		sforce.connection.sessionId = null;
		sforce.connection.debuggingHeader = null; // this, too is necessary!
		sforce.connection.login($un,$pwd);
		//sforce.connection.login("lohitha@svmxtest.org.testpar2","maxpl0re1");
		//var query = "select name from Account"; 
		var records = sforce.connection.query($queryComplex);
		var arr= records.getArray('records');
		return arr;
	}
	
//</browser> 
var $nArr;
_set($nArr, _fetch(returnSforce($un,$pwd,$queryComplex)));

$nArr.forEach(function($arrValue) {
		_log($arrValue.Id);
		_log($arrValue.SVMXC__ProcessID__c);
		_log($arrValue.SVMXC__Name__c);

});




/*
$nArr.forEach(function(err,entry_criteria_for_Service){
			if(err){return .error(err)}
			var entry_criteria_for_Service_ID;
			var surcharge_criteria_for_Service_ID;
			for (var i=0; i < entry_criteria_for_Service.records.length; i++) {
				if(entry_criteria_for_Service.records[i].SVMXC__ProcessID__c == 'EXPR038'){
					entry_criteria_for_Service_ID = entry_criteria_for_Service.records[i].Id;
				}
				if(entry_criteria_for_Service.records[i].SVMXC__ProcessID__c == 'EXPR037'){
					surcharge_criteria_for_Service_ID = entry_criteria_for_Service.records[i].Id;
				}
			}
			var now = new Date();
			var strDate = now.getFullYear() + '-' + now.getMonth() + '-' + now.getDate();
			.log('info',"***** Creating Service *****");
			sforce.connection.sobject("SVMXC__Service__c").create([{SVMXC__Active__c : true, SVMXC__Data_Type__c : 'Text', SVMXC__Effective_Date__c : strDate,  SVMXC__Qualifying_Criteria__c : entry_criteria_for_Service_ID, SVMXC__Service_Type__c : 'Installation', SVMXC__Tracked_On__c : 'Work Order', Name : 'fixed_Rate_GP'},
			{SVMXC__Active__c : true, SVMXC__Data_Type__c : 'Text', SVMXC__Effective_Date__c : strDate,  SVMXC__Qualifying_Criteria__c : surcharge_criteria_for_Service_ID, SVMXC__Service_Type__c : 'Installation', SVMXC__Tracked_On__c : 'Work Order', Name : 'surcharge_GP'}],function(err, service){
			if(err){return .error(err)}
			fixed_Rate_Service_GP = service[0].id;
			surcharge_Service_GP = service[1].id;
			.log('info',"service fixed = " + fixed_Rate_Service_GP);
			.log('info',"service surcharge = " + surcharge_Service_GP);
			create_Include_Service();
			})
		})
		*/


